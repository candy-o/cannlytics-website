<!doctype html>
<html>
<!--
  Data Market Page | Cannlytics Website
  Copyright (c) 2021-2022 Cannlytics

  Authors: Keegan Skeate <contact@cannlytics.com>
  Created: 10/14/2021
  Updated: 11/25/2021
  License: MIT License <https://github.com/cannlytics/cannlytics-website/blob/main/LICENSE>
-->
{% extends "website/index.html" %}
{% load static icon get_env %}
{% block title %}Data Market | Cannlytics{% endblock %}
{% block page_css %}

  <style>
    .card {
      margin-bottom:2%;
    }
    .grid__col-sizer,
    .photo-item {
      width: 32%;
    }
    .grid__gutter-sizer {
      width: 2%;
    }
    @media only screen and (max-width: 480px) {
      .grid__col-sizer,
      .photo-item {
        width: 98%;
      }
    }
    .photo-item__image {
      display: block;
      max-width: 100%;
    }
    .photo-item__caption a {
      color: black;
      font-size: 0.8em;
      text-decoration: none;
    }
    .page-load-status {
      display: none; /* hidden by default */
      padding-top: 20px;
      border-top: 1px solid #DDD;
      text-align: center;
      color: #777;
    }
    .loader-ellips {
      font-size: 20px; /* change size here */
      position: relative;
      width: 4em;
      height: 1em;
      margin: 10px auto;
    }
    .loader-ellips__dot {
      display: block;
      width: 1em;
      height: 1em;
      border-radius: 0.5em;
      background: #555; /* change color here */
      position: absolute;
      animation-duration: 0.5s;
      animation-timing-function: ease;
      animation-iteration-count: infinite;
    }
    .loader-ellips__dot:nth-child(1),
    .loader-ellips__dot:nth-child(2) {
      left: 0;
    }
    .loader-ellips__dot:nth-child(3) { left: 1.5em; }
    .loader-ellips__dot:nth-child(4) { left: 3em; }

    @keyframes reveal {
      from { transform: scale(0.001); }
      to { transform: scale(1); }
    }
    @keyframes slide {
      to { transform: translateX(1.5em) }
    }
    .loader-ellips__dot:nth-child(1) {
      animation-name: reveal;
    }
    .loader-ellips__dot:nth-child(2),
    .loader-ellips__dot:nth-child(3) {
      animation-name: slide;
    }

    .loader-ellips__dot:nth-child(4) {
      animation-name: reveal;
      animation-direction: reverse;
    }
  </style>

{% endblock page_css %}
{% block material %}

  <!-- Banner -->
  {% comment %} {% include "website/components/heros/hero_banner.html" with
    title='Data Market'
    description='Browse the Data Market.'
    background_image='https://firebasestorage.googleapis.com/v0/b/cannlytics.appspot.com/o/public%2Fimages%2Fbackgrounds%2Fmisc%2Fvictorian_ransom.jpg?alt=media&token=159b4792-ac98-4c97-8e5d-109d8228d5ac'
    image_url=' '
    only
  %} {% endcomment %}

  <!-- Section -->
  <section class="container mb-2">

    <!-- Title -->
    <div class="d-flex align-items-center justify-content-between pt-5 mb-3">
      <h2 class="serif mb-0">Data Market</h2>
      <div class="d-flex align-items-center">
        <button class="btn btn-sm-light text-nowrap me-2">
          {% icon "credit-card" width="16px" height="16px" class="me-1" %}
          Connect Wallet
        </button>
        <a class="btn btn-sm-light me-2" href="{% url 'section' 'data' 'publish' %}">
          Publish
        </a>
        {% comment %} <a class="btn btn-sm-light" href="{% url 'page' 'account' %}">
          Profile
        </a> {% endcomment %}
        
      </div>
    </div>

    <!-- Options -->
    <div class="mt-3 d-flex align-items-center justify-content-between">
      
      <!-- TODO: Tabs with Stats -->
      <ul class="nav nav-tabs">
        {% comment %} <li class="nav-item">
          <a
            class="nav-link fs-6 {% if request.GET.table == 'profiles' %}active{% endif %}"
            aria-current="page"
            href="./?table=profiles"
          >
            <small class="serif"><span id="total_profiles"></span> Profiles</small>
          </a>
        </li> {% endcomment %}
        <li class="nav-item">
          <a class="nav-link fs-6 {% if request.GET.table == 'datasets' or not request.GET.table %}active{% endif %}" href="./?table=datasets">
            <small class="serif"><span id="total_datasets"></span>Data Sets</small>
          </a>
        </li>
      </ul>

      <!-- Filters -->
      <div class="d-flex align-items-center">

        <!-- Sort select -->
        <select
          class="form-select form-select-sm btn-sm-light me-2"
          aria-label="Default select example"
          style="width:150px;"
        >
          <option selected value="date-new">Date Listed: Newest</option>
          <option value="date-old">Date Listed: Oldest</option>
          <option value="price-high">Price: Highest</option>
          <option value="price-low">Price: Lowest</option>
        </select>

        <!-- Currency select -->
        <select
          class="form-select form-select-sm btn-sm-light"
          aria-label="Select currency"
        >
          <option selected value="usd">USD ($)</option>
          <option value="eur">EUR (€)</option>
          <option value="btc">BTC (₿)</option>
          <option value="eth">ETH (Ξ)</option>
        </select>

      </div><!-- End of filters -->

    </div><!-- End of options -->

    <!-- TODO: Buy dataset(s) -->
    <!-- Sidepanel of filters and grid of data sets -->
    <div class="container px-0 mt-3">

      <div class="d-flex">

      <!-- Sidebar options -->
      <div
        class="d-flex flex-column flex-shrink-0 p-3 text-dark border rounded"
        style="width: 280px;"
      >

        <h2>Filters</h2>

        <!-- Price range -->

        <!-- Type -->

        <!-- Availability -->

        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
          <label class="form-check-label" for="defaultCheck1">
            Default checkbox
          </label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="" id="defaultCheck2" disabled>
          <label class="form-check-label" for="defaultCheck2">
            Disabled checkbox
          </label>
        </div>
        <hr>
        <div class="dropdown">
          <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
            <img src="https://github.com/mdo.png" alt="" width="32" height="32" class="rounded-circle me-2">
            <strong>mdo</strong>
          </a>
          <ul class="dropdown-menu dropdown-menu-dark text-small shadow" aria-labelledby="dropdownUser1">
            <li><a class="dropdown-item" href="#">New project...</a></li>
            <li><a class="dropdown-item" href="#">Settings</a></li>
            <li><a class="dropdown-item" href="#">Profile</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#">Sign out</a></li>
          </ul>
        </div>
      </div><!-- End of sidebar -->

      <!-- Grid -->
      <section class="w-100">
      {% include "website/pages/data/data_components/market_datasets.html" with items=datasets %}
      </section>

    </div><!-- End of sidepanel -->


    <!-- TODO: Table of high liquidity data sets -->
    {% comment %} <h5 class="sans-serif text-dark fs-5 mt-5 mb-3">Highest Liquidity</h5> {% endcomment %}


    <!-- TODO: Table of recently published data sets -->
    {% comment %} <h5 class="sans-serif text-dark fs-5 mt-5 mb-3">Recently Published</h5> {% endcomment %}
    

  </section><!-- End of section -->

{% endblock material %}

<!-- JavaScript -->
{% block page_js %}

  <script>

    // Get state data from Firestore.
    cannlytics.data.getDataMarketStats().then(function(response) {

      // Set the number of profiles and datasets.
      document.getElementById('total_profiles').value = response.total_profiles ?? 0;
      document.getElementById('total_datasets').value = response.total_datasets ?? 0;

    });

  </script>

{% endblock page_js %}
