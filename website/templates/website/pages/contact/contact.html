<!doctype html>
<html>
<!--
  Contact Page | Cannlytics Website
  Copyright (c) 2021 Cannlytics

  Authors: Keegan Skeate <keegan@cannlytics.com>
  Created: 1/6/2021
  Updated: 11/25/2021
  License: MIT License <https://github.com/cannlytics/cannlytics-website/blob/main/LICENSE>
  
  Optional Improvements:
    - Loading button
-->
{% extends "website/index.html" %}
{% block title %}Contact | Cannlytics{% endblock %}
{% load static get_env %}
{% block page_css %}
  <style>
    body.dark .captcha-question {
      color: #f8f8f8;
    }
    body.dark .textinput {
      background: transparent;
      color: #f8f8f8;
    }
  </style>
{% endblock %}
{% block material %}
  <div class="contact container my-4 my-lg-5 px-5">

    <!-- Hero -->
    <div class="row featurette mt-5">
      <div class="col-md-7 order-2 order-lg-1">
        <h2 class="h1 serif text-gradient-reverse pb-3 mt-3 mb-0">
          {{ contact.title }}
        </h2>
        <p class="fs-6 double-line text-dark text-start text-muted mb-4">
          {{ contact.message }}
        </p>

        <!-- Form -->
        <form
          id="contact-form"
          class="mt-4 pe-sm-5"
          action="/api/internal/send-message"
          method="post"
          onsubmit="return onSubmit(this);"
        >

          <!-- CSRF Token -->
          {% csrf_token %}
          
          <!-- Name -->
          <div class="row mb-3">
            <label class="col-sm-2 col-form-label col-form-label-sm serif">
              Name
            </label>
            <div class="col-sm-10">
              <input
                type="text"
                id="name_input"
                class="form-control form-control-sm"
                name="name"
                spellcheck="false"
                type="text"
              >
            </div>
          </div>

          <!-- Email -->
          <div class="row mb-3">
            <label class="col-sm-2 col-form-label col-form-label-sm serif">
              Email
            </label>
            <div class="col-sm-10">
              <input
                type="text"
                id="email_input"
                class="form-control form-control-sm"
                name="email"
                spellcheck="false"
                type="email"
              >
            </div>
          </div>

          <!-- Subject -->
          <div class="row mb-3">
            <label class="col-sm-2 col-form-label col-form-label-sm serif">
              Subject
            </label>
            <div class="col-sm-10">
              <input
                type="text"
                id="subject_input"
                class="form-control form-control-sm"
                name="subject"
                spellcheck="false"
                type="text"
              >
            </div>
          </div>

          <!-- Message -->
          <div class="form-floating mb-3">
            <textarea
              id="message_input"
              name="message"
              class="form-control form-control-sm"
              placeholder=""
              style="height:250px"
            ></textarea>
            <label for="message_input" class="serif mb-3 text-dark">
              Message
            </label>
          </div>

          <!-- ReCaptcha -->
          <div class="g-recaptcha" data-sitekey="{{ recaptcha.site_key }}"></div>

          <!-- Submit -->
          <div class="d-flex align-items-center justify-content-end">
            <input
              class="btn btn-sm bg-gradient-green text-white"
              type="submit"
              value="Send message"
            >
          </div>

        </form>
      </div>

      <!-- Image -->
      <div class="col-md-5 order-1 order-lg-2 mb-3">
        <img
          src="{% static 'website/images/illustrations/cannlytics_office.svg' %}"
          width="100%"
        >
      </div>

    </div>
  </div>
{% endblock %}

<!-- JavaScript -->
{% block page_js %}
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
  <script>
    function onSubmit(form) {
      /**
        * Submit the contact form after validation.
        */
      var email = form.email.value;
      if (email === null || email === '') {
        cannlytics.showNotification('Email required', 'Please enter a valid email so we can reply to your message.', 'error');
        return false;
      }
      var message = form.message.value;
      if (message === null || message === '') {
        cannlytics.showNotification('Message required', 'Please enter a message so we can reply to you.', 'error');
        return false;
      }
      return true;
    }
  </script>
{% endblock %}

</html>
