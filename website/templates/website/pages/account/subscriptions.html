<!doctype html>
<html>
<!--
  Subscription Management Page | Cannlytics Website
  Copyright (c) 2021 Cannlytics

  Authors: Keegan Skeate <contact@cannlytics.com>
  Created: 11/16/2021
  Updated: 12/31/2021
  License: MIT License <https://github.com/cannlytics/cannlytics-website/blob/main/LICENSE>
-->
{% extends "website/index.html" %}
{% load static %}
{% block title %}Subscription | Cannlytics{% endblock %}
{% block material %}

{% if not user.email %}

  <!-- Sign In Prompt -->
  <section class="container mb-2 mt-5 d-flex justify-content-center">
    <div class="markdown py-5" style="max-width:560px;">
      <svg class="pe-3 pt-3" style="float:left;width:125px;height:125px;">
        <use href="{% static "website/images/emojies/newspaper.svg" %}#newspaper-emoji"></use>
      </svg>
      <h1 class="pt-4 text-dark">Cannlytics Subscriptions</h1>
      <p class="mt-2">
        You will need to create an account or to sign in
        to take advantage of Cannlytics subscriptions.
      </p>
      <div class="d-flex justify-content-center mt-3">
        <a
          class="btn btn-sm bg-gradient-green text-white serif"
          data-bs-target="#login-dialog"
          data-bs-toggle="modal"
        >
          Sign in &raquo;
        </a>
      </div>
    </div>
  </section>

{% else %}

  <!-- Subscription Management -->
  <section class="container mb-2 mt-5">

    <!-- Header -->
    <h2 class="mb-3 pt-5 serif text-dark">
      Manage your Cannlytics Subscription
    </h2>
    <p class="fs-6 double-line mb-5" style="max-width:540px;">
      Showing subscriptions for {{ user.email }}.
    </p>

    <!-- Subscribe / unsubscribe from newsletter -->
    <div class="markdown py-3" style="max-width:560px;">
      <svg class="pe-1 pt-3" style="float:left;width:125px;height:125px;">
        <use href="{% static "website/images/emojies/newspaper.svg" %}#newspaper-emoji"></use>
      </svg>
      <h1 class="pt-4 text-dark">Free Newsletter</h1>
      <p class="mt-2">
        You can receive periodic newsletters and updates from Cannlytics if you
        believe that you will benefit from our free material, including novel
        datasets and statistics.
      </p>
      <p class="text-start mt-3">
        <div class="form-check">
          <input
            id="free-newsletter-checkbox"
            class="form-check-input"
            type="checkbox"
            value=""
            onchange="cannlytics.payments.subscribe('newsletter');"
          >
          <label
            class="app-action background-hover form-check-label"
            for="free-newsletter-checkbox"
          >
            Subscribe to Free Newsletter
          </label>
        </div>
      </p>
    </div>

    <!-- Subscribe / unsubscribe from premium material -->
    <div class="markdown py-3" style="max-width:560px;">
      <svg class="pe-1 pt-3" style="float:left;width:125px;height:125px;">
        <use href="{% static "website/images/emojies/coin.svg" %}#coin-emoji"></use>
      </svg>
      <h1 class="pt-4 text-dark">Premium Material</h1>
      <p class="mt-2">
        You can get premium material to gain a competitive edge, including all
        <a href="{% url 'page' page='data' %}">datasets</a>,
        <a href="{% url 'page' page='videos' %}">premium videos</a>,
        <a href="{% url 'page' page='whitepapers' %}">whitepapers</a>, and
        <a href="{% url 'page' page='api' %}">API access</a>.
      </p>
      <p class="text-start mt-3">
        <div class="form-check">
          <input
            id="premium-material-checkbox"
            class="form-check-input"
            type="checkbox"
            value=""
          >
          <label
            class="app-action background-hover form-check-label"
            for="premium-material-checkbox"
            onclick="cannlytics.payments.subscribe('premium');"
          >
            Subscribe to Premium Material
          </label>
        </div>
      </p>
      <!-- TODO: Show PayPal checkout if user subscribes -->
    </div>

    <!-- Subscribe / unsubscribe from enterprise / pro support -->
    <div class="markdown py-3" style="max-width:560px;">
      <svg class="pe-1 pt-3" style="float:left;width:125px;height:125px;">
        <use href="{% static "website/images/emojies/atronaut.svg" %}#atronaut-emoji"></use>
      </svg>
      <h1 class="pt-4 text-dark">Software Support</h1>
      <p class="mt-2">
        If you are an organization or a developer, then you can utilize our
        software support options to help get up and running, make sure that your
        systems run smoothly, and get us to create solutions for you.
      </p>
      <p class="text-start mt-3">
        <div class="form-check">
          <input
            class="form-check-input"
            type="radio"
            name="support-option"
            id="support-option-none"
            checked
          >
          <label
            class="app-action background-hover form-check-label"
            for="support-option-none"
          >
            No support
          </label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input danger"
            type="radio"
            name="support-option"
            id="support-option-pro"
          >
          <label
            class="app-action background-hover form-check-label"
            for="support-option-pro"
          >
            Pro
          </label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="radio"
            name="support-option"
            id="support-option-enterprise"
          >
          <label
            class="app-action background-hover form-check-label"
            for="support-option-enterprise"
          >
            Enterprise
          </label>
        </div>
      </p>
      <!-- TODO: Show PayPal checkout if user gets higher level of support |
        Show notification if user chooses a lower level of support.
      -->
    </div>

  </section>

{% endif %}

{% endblock material %}

<!-- JavaScript -->
{% block page_js %}
  <script>

    // FIXME: Load the user's current subscriptions?
    //cannlytics.website.getUserSubscriptions(function (data) {
    //  console.log('Subscription data:', data);
    //});

    // TODO: Automatically unsubscribe user from newsletter if they navigate with
    // special query parameter that is a salted hash of their email.

  </script>
{% endblock page_js %}
